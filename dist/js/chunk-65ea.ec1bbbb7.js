(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-65ea"],{2621:function(e,t){t.f=Object.getOwnPropertySymbols},"2e8e":function(e,t,i){"use strict";var a=[{label:"北京",cities:[{label:"北京"}]},{label:"天津",cities:[{label:"天津"}]},{label:"上海",cities:[{label:"上海"}]},{label:"重庆",cities:[{label:"重庆"}]},{label:"内蒙古自治区",cities:[{label:"呼和浩特"}]},{label:"新疆维吾尔自治区",cities:[{label:"乌鲁木齐"}]},{label:"广西省",cities:[{label:"南宁"}]},{label:"宁夏回族自治区",cities:[{label:"银川"}]},{label:"西藏自治区",cities:[{label:"拉萨"}]},{label:"黑龙江省",cities:[{label:"哈尔滨"}]},{label:"吉林省",cities:[{label:"长春"}]},{label:"辽宁省",cities:[{label:"沈阳"}]},{label:"河北省",cities:[{label:"石家庄"}]},{label:"山西省",cities:[{label:"太原"}]},{label:"江苏省",cities:[{label:"南京"}]},{label:"浙江省",cities:[{label:"杭州"}]},{label:"安徽省",cities:[{label:"合肥"}]},{label:"福建省",cities:[{label:"福州"}]},{label:"江西省",cities:[{label:"南昌"}]},{label:"山东省",cities:[{label:"济南"}]},{label:"河南省",cities:[{label:"郑州"}]},{label:"湖北省",cities:[{label:"武汉"}]},{label:"湖南省",cities:[{label:"长沙"}]},{label:"广东省",cities:[{label:"广州"},{label:"深圳"}]},{label:"海南省",cities:[{label:"海口"}]},{label:"四川省",cities:[{label:"成都"}]},{label:"贵州省",cities:[{label:"贵阳"}]},{label:"云南省",cities:[{label:"昆明"}]},{label:"陕西省",cities:[{label:"西安"}]},{label:"甘肃省",cities:[{label:"兰州"}]},{label:"青海省",cities:[{label:"西宁"}]},{label:"台湾省",cities:[{label:"台北"}]},{label:"香港特别行政区",cities:[{label:"香港"}]},{label:"澳门特别行政区",cities:[{label:"澳门"}]},{label:"小宇宙",cities:[{label:"小宇宙"}]}];t["a"]=a},7333:function(e,t,i){"use strict";var a=i("0d58"),l=i("2621"),s=i("52a7"),r=i("4bf8"),n=i("626a"),o=Object.assign;e.exports=!o||i("79e5")(function(){var e={},t={},i=Symbol(),a="abcdefghijklmnopqrst";return e[i]=7,a.split("").forEach(function(e){t[e]=e}),7!=o({},e)[i]||Object.keys(o({},t)).join("")!=a})?function(e,t){var i=r(e),o=arguments.length,c=1,u=l.f,p=s.f;while(o>c){var b,d=n(arguments[c++]),f=u?a(d).concat(u(d)):a(d),g=f.length,m=0;while(g>m)p.call(d,b=f[m++])&&(i[b]=d[b])}return i}:o},7714:function(e,t,i){},edfa:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"flex flex-v",attrs:{id:"permission"}},[a("section",{staticClass:"permission_title"},[e._v("活动管理")]),a("section",{staticClass:"permission_table flex-1"},[a("section",{staticClass:"permission_table_top flex flex-pack-justify"},[a("section",{staticClass:"flex flex-align-center flex-1"},[a("span",{staticClass:"labelname"},[e._v("\n          城市名称\n        ")]),a("el-select",{staticClass:"list-filter-select",attrs:{placeholder:"请选择城市"},on:{change:e.handleSelectRegion},model:{value:e.fliterregion,callback:function(t){e.fliterregion=t},expression:"fliterregion"}},e._l(e.searchregion,function(e){return a("el-option",{key:e.region_id,attrs:{label:e.region_name,value:e.region_id}})})),a("section",{staticClass:"flex flex-align-center",staticStyle:{"margin-left":"10px"}},[a("el-button",{attrs:{type:"text"},on:{click:e.clearSearch}},[e._v("清除搜索")])],1)],1),e.authUser.permissions&&e.authUser.permissions.activity&&"activity_update"===e.authUser.permissions.activity[0].permissions?a("section",{staticClass:"flex flex-align-center"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:e.addActivity}},[e._v("添加活动")])],1):e._e()]),a("section",{staticClass:"permission_table_content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.activityLists.data}},[a("el-table-column",{attrs:{prop:"activityName",label:"活动名称"}}),a("el-table-column",{attrs:{prop:"regionName",label:"活动城市"}}),a("el-table-column",{attrs:{prop:"size",label:"尺寸（px）"}}),a("el-table-column",{attrs:{prop:"url",width:"280",label:"关联页面"}}),a("el-table-column",{attrs:{label:"展示图"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("section",[a("img",{staticClass:"table_logo",attrs:{src:e.row.logo,alt:""}})])]}}])}),a("el-table-column",{attrs:{prop:"status",label:"展示状态"}}),a("el-table-column",{attrs:{prop:"buildVer",label:"版本号"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===e.authUser.type?a("section",[a("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(i){e.edit(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(i){e.start(t.row)}}},["已停用"===t.row.status?a("span",[e._v("启用")]):a("span",[e._v("停用")])]),a("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(i){e.look(t.row)}}},[e._v("查看")])],1):a("section",[e.authUser.permissions&&e.authUser.permissions.activity&&"activity_update"===e.authUser.permissions.activity[0].permissions?a("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(i){e.edit(t.row)}}},[e._v("编辑")]):e._e(),e.authUser.permissions&&e.authUser.permissions.activity&&"activity_update"===e.authUser.permissions.activity[0].permissions?a("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(i){e.start(t.row)}}},["已停用"===t.row.status?a("span",[e._v("启用")]):a("span",[e._v("停用")])]):e._e(),e.authUser.permissions&&e.authUser.permissions.activity&&"activity_view"===e.authUser.permissions.activity[0].permissions?a("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(i){e.look(t.row)}}},[e._v("查看")]):e._e()],1)]}}])})],1)],1),a("el-dialog",{staticStyle:{"text-align":"center"},attrs:{title:"查看位置",visible:e.outerVisible1},on:{"update:visible":function(t){e.outerVisible1=t}}},[a("img",{attrs:{src:i("fc50"),alt:""}})]),a("el-dialog",{attrs:{title:"编辑活动",visible:e.outerVisible},on:{"update:visible":function(t){e.outerVisible=t}}},[a("section",{staticClass:"dialog-content"},[a("el-form",{staticClass:"city-ruleform",attrs:{rules:e.rules,"label-width":"140px",disabled:e.isdisabled}},[a("el-form-item",{attrs:{label:"活动名称："}},[a("section",{staticClass:"flex flex-align-center dialog-label"},[a("el-input",{attrs:{placeholder:"输入活动名称"},model:{value:e.displayname,callback:function(t){e.displayname=t},expression:"displayname"}})],1)]),a("el-form-item",{attrs:{label:"建议尺寸（px）："}},[a("section",{staticClass:"flex flex-align-center dialog-label"},[a("span",[e._v(e._s(e.displaysize))])])]),a("el-form-item",{attrs:{label:"关联页面："}},[a("section",{staticClass:"flex flex-align-center"},[a("el-input",{attrs:{type:"url",placeholder:"输入链接"},model:{value:e.displaypage,callback:function(t){e.displaypage=t},expression:"displaypage"}})],1)]),a("el-form-item",{attrs:{label:"城市名称："}},[a("section",{staticClass:"flex flex-align-center"},[a("el-select",{staticClass:"list-filter-select",attrs:{placeholder:"请选择城市"},on:{change:e.handleSelectRegion2},model:{value:e.fliterregion2,callback:function(t){e.fliterregion2=t},expression:"fliterregion2"}},e._l(e.searchregion,function(e){return a("el-option",{key:e.region_id,attrs:{label:e.region_name,value:e.region_id}})}))],1)]),a("el-form-item",{directives:[{name:"loading",rawName:"v-loading.body",value:e.loadingAvatarUpload,expression:"loadingAvatarUpload",modifiers:{body:!0}}],attrs:{label:"展示图："}},[a("section",{staticClass:"activity-cell flex flex-align-start"},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadUrl,"show-file-list":!1,"on-error":e.handleError,headers:e.headers,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)]),a("el-form-item",{attrs:{label:"版本号："}},[a("section",{staticClass:"flex flex-align-center dialog-label"},[a("el-input",{attrs:{disabled:e.verDisabled,placeholder:"待审版本号"},model:{value:e.buildVer,callback:function(t){e.buildVer=t},expression:"buildVer"}})],1)]),a("el-form-item",{attrs:{label:"展示位状态："}},[a("section",{staticClass:"flex flex-align-center dialog-label"},[a("el-input",{attrs:{disabled:!0},model:{value:e.displaystatus,callback:function(t){e.displaystatus=t},expression:"displaystatus"}})],1)])],1)],1),a("section",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保 存")])],1)])],1)])},l=[],s=(i("96cf"),i("3040")),r=(i("f751"),i("c93e")),n=(i("2e8e"),i("2f62")),o={computed:Object(r["a"])({},Object(n["c"])("activity",["activityLists","searchregion"]),{headers:function(){return{Authorization:"CloserSysAuth ".concat(this.$store.state.token)}},authUser:function(){return this.$store.state.authUser}}),data:function(){return{activitypara:{pagenum:1,pagesize:10},isdisabled:!1,verDisabled:!1,rules:{},loadingAvatarUpload:!1,outerVisible:!1,outerVisible1:!1,uploadUrl:"".concat(api.filePath).concat(api.file),imageUrl:"",imageOnlineUrl:"",operationtype:"",row:{},display:{options:[{value:"停用",label:"启用"}]},displayname:"",buildVer:0,displaystatus:"",displaypage:"",displaysize:"246 * 246",fliterregion:"",fliterregion2:"小宇宙",obj:{regionName:"小宇宙",regionId:"0"}}},created:function(){this.getAllActivity(this.activitypara),this.getCityList({pagesize:100})},methods:Object(r["a"])({},Object(n["b"])("activity",["getAllActivity","updateActivity","newActivity","updateActivityStatus","getCityList"]),{handleError:function(e){this.$message.error("Network Error!"),this.loadingAvatarUpload=!1},handleSelectRegion:function(e){this.pagenum=1;var t={};this.searchregion.map(function(i){if(i.region_id===e)return t={regionName:i.region_name,regionId:i.region_id},t}),this.getAllActivity(Object.assign(this.activitypara,t))},handleSelectRegion2:function(e){var t=this;this.searchregion.map(function(i){if(i.region_id===e)return t.obj={regionName:i.region_name,regionId:i.region_id},t.obj})},handleAvatarSuccess:function(e,t){var i=this;try{0===e.code?(i.$message.success("上传成功"),i.imageUrl=URL.createObjectURL(t.raw),i.imageUrl="".concat(api.filePath).concat(e.result.url)):i.$message.error(e.result)}catch(e){i.$message.error(e)}i.loadingAvatarUpload=!1},beforeAvatarUpload:function(e){var t=this;t.loadingAvatarUpload=!0;var i=e.type.indexOf("image/")>-1,a=e.size/1024/1024<.75;return i||(t.$message.error("只能上传图片!"),t.loadingAvatarUpload=!1),a||(t.loadingAvatarUpload=!1,t.$message.error("上传图片大小不能超过 750kb!")),i&&a},save:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,i,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this,{},t.displayname){e.next=4;break}return t.$message.warning("活动名称不能为空！"),e.abrupt("return");case 4:if(t.displaypage){e.next=7;break}return t.$message.warning("活动页面不能为空！"),e.abrupt("return");case 7:if(t.imageUrl){e.next=10;break}return t.$message.warning("活动logo不能为空！"),e.abrupt("return");case 10:if(t.fliterregion2){e.next=13;break}return t.$message.warning("活动城市不能为空！"),e.abrupt("return");case 13:return e.next=15,t.searchregion.map(function(e){if(e.region_id===t.fliterregion2)return t.obj={regionName:e.region_name,regionId:e.region_id},t.obj});case 15:if(i={activityId:t.row.activityId,name:t.displayname,buildVer:t.buildVer||0,size:t.displaysize,logo:t.imageUrl,url:t.displaypage},"add"!==t.operationtype){e.next=22;break}return e.next=19,t.newActivity(Object.assign(i,t.obj));case 19:a=e.sent,e.next=25;break;case 22:return e.next=24,t.updateActivity(Object.assign(i,t.obj));case 24:a=e.sent;case 25:if(!a){e.next=29;break}return t.outerVisible=!1,e.next=29,t.activityList();case 29:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),look:function(){this.outerVisible1=!0},addActivity:function(){var e=this;e.displayname="",e.buildVer="",e.displaystatus="活动添加成功后，请在活动面板启用活动",e.displaypage="",e.imageUrl="",e.fliterregion2="china",e.operationtype="add",e.outerVisible=!0},edit:function(e){var t=this;t.row=e,t.outerVisible=!0,t.displayname=e.activityName,t.buildVer=e.buildVer,t.displaystatus=e.status,t.displaypage=e.url,t.imageUrl=e.logo,t.fliterregion2=e.regionId,t.operationtype="update",t.verDisabled="已停用"===e.status},activityList:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this,e.next=3,t.getAllActivity({pagenum:1,pagesize:10});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),sureStart:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var i,a,l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=this,a="已停用"!==t.status,e.next=3,i.updateActivityStatus({activityId:t.activityId,enabled:a});case 3:if(l=e.sent,!l){e.next=7;break}return e.next=7,i.activityList();case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),start:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var i,a,l=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:i=this,a="已启用"===t.status?"此操作将关闭“".concat(t.activityName,"”, 是否继续?"):"此操作将开启“".concat(t.activityName,"”, 是否继续?"),i.$confirm(a,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.sureStart(t);case 2:case"end":return e.stop()}},e,this)}))).catch(function(){l.$message({type:"info",message:"已取消操作"})});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),clearSearch:function(){this.fliterregion="";var e={regionName:"",regionId:""};this.getAllActivity(Object.assign(this.activitypara,e))}})},c=o,u=(i("fdaf"),i("2877")),p=Object(u["a"])(c,a,l,!1,null,"49157ce2",null);p.options.__file="index.vue";t["default"]=p.exports},f751:function(e,t,i){var a=i("5ca1");a(a.S+a.F,"Object",{assign:i("7333")})},fc50:function(e,t,i){e.exports=i.p+"img/displaylogo.0e2d255c.png"},fdaf:function(e,t,i){"use strict";var a=i("7714"),l=i.n(a);l.a}}]);
//# sourceMappingURL=chunk-65ea.ec1bbbb7.js.map
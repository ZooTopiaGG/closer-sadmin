(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0475"],{"131e":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"wait"},[e._v("功能暂未开发，敬请期待！")])},r=[],s=(a("7f7f"),a("96cf"),a("3040")),c={options:[{label:"IOS",value:"0"},{label:"安卓",value:"1"},{label:"其他",value:"2"}]},i={middleware:"auth",asyncData:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var a,n,r,s,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.app,n=t.error,e.prev=1,r={type:null,withDeleted:!1,name:"",plateform:null,pageNum:1,pageSize:10,startTime:null,endTime:null},e.next=5,a.$axios.$post("".concat(api.promotion.plan_list),r);case 5:if(s=e.sent,0!==s.code){e.next=13;break}return e.next=9,s.result.data.map(function(e){return 1===e.type?(e.typename="渠道",e.channelid=e.id,e.planid="-"):(e.typename="推广计划",e.planid=e.id,e.channelid="-"),e});case 9:return c=e.sent,e.abrupt("return",{res:{data:c,count:s.result.count}});case 13:n({message:"错误代码:".concat(s.code,", ").concat(s.result)});case 14:e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](1),n({message:"".concat(e.t0)});case 19:case"end":return e.stop()}},e,this,[[1,16]])}));return function(t){return e.apply(this,arguments)}}(),computed:{authUser:function(){return!!this.$store.state.authUser&&JSON.parse(this.$store.state.authUser)}},data:function(){return{res:{data:[],count:""},searchname:"",pagenum:1,pagesize:10,checkedRecord:[],planTitle:"新建推广计划",channelTitle:"新建渠道",planDisabled:!1,channelDisabled:!1,updaterow:{},plates:c,op:"",pickerOptions2:{disabledDate:function(e){return e.getTime()>Date.now()},shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},dataValue:"",flitertypes:"",types:{options:[{value:"渠道",label:"渠道"},{value:"推广",label:"推广"},{value:"全部",label:"全部"}]},outerVisible:!1,channelForm:{plateform:"安卓",channelname:"",channelid:""},outerVisible1:!1,planForm:{plateform:"安卓",planname:"",planid:""},stype:""}},methods:{handleSelect2:function(){if("IOS"===this.channelForm.plateform)this.channelForm.channelid="IOS";else{if("update"==this.op)return void(this.channelForm.channelid=this.updaterow.channelid);this.channelForm.channelid=""}},spread:function(e){console.log("row===",e),this.$router.push({path:"/statistic/spread/".concat(e.planid,"?type=").concat(e.name)})},retain:function(){this.$router.push({path:"/statistic/retain/channel/8asd19ds"})},getList:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,a,n,r,s,c,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=this,e.t0=t.flitertypes,e.next="渠道"===e.t0?4:"推广"===e.t0?6:"全部"===e.t0?8:10;break;case 4:return a=1,e.abrupt("break",11);case 6:return a=0,e.abrupt("break",11);case 8:return a=null,e.abrupt("break",11);case 10:a=null;case 11:return e.next=13,t.checkedRecord.map(function(e){return e="IOS"===e?"0":"安卓"===e?"1":"2",e});case 13:return r=e.sent,n=r.length>0?r.join(","):null,e.prev=15,s={type:a,withDeleted:!1,name:t.searchname,plateform:n,pageNum:t.pagenum,pageSize:t.pagesize,startTime:t.dataValue[0]||null,endTime:t.dataValue[1]||null},e.next=19,t.$axios.$post("".concat(api.promotion.plan_list),s);case 19:if(c=e.sent,0!==c.code){e.next=27;break}return e.next=23,c.result.data.map(function(e){return e.createTime=t.$com.createTime(e.createTime,"yy-mm-dd hh:MM"),1===e.type?(e.typename="渠道",e.channelid=e.id,e.planid="-"):(e.typename="推广计划",e.planid=e.id,e.channelid="-"),e});case 23:i=e.sent,t.res={data:i,count:c.result.count},e.next=28;break;case 27:t.$messgae.error(c.result);case 28:e.next=33;break;case 30:e.prev=30,e.t1=e["catch"](15),t.$messgae.error(e.t1);case 33:case"end":return e.stop()}},e,this,[[15,30]])}));return function(){return e.apply(this,arguments)}}(),addChannel:function(){var e=this;e.outerVisible=!0,e.channelTitle="新建渠道",e.op="add",e.channelDisabled=!1,e.channelForm={plateform:"安卓",channelname:"",channelid:""}},sureAddChannel:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,a,n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=this,e.t0=t.channelForm.plateform,e.next="IOS"===e.t0?4:"安卓"===e.t0?6:"其他"===e.t0?8:10;break;case 4:return a=0,e.abrupt("break",11);case 6:return a=1,e.abrupt("break",11);case 8:return a=2,e.abrupt("break",11);case 10:a=2;case 11:if(t.$com.isEn(t.channelForm.channelid)){e.next=14;break}return t.$message.error("请输入纯英文的ID"),e.abrupt("return");case 14:return e.prev=14,n={type:1,name:t.channelForm.channelname,plateform:a,id:t.channelForm.channelid},e.next=18,t.$axios.$post("".concat(api.promotion.plan_add),n);case 18:if(r=e.sent,0!==r.code){e.next=26;break}return t.$message.success("新建成功！"),e.next=23,t.getList();case 23:t.outerVisible=!1,e.next=27;break;case 26:t.$message.error(r.result);case 27:e.next=32;break;case 29:e.prev=29,e.t1=e["catch"](14),t.$message.error(e.t1);case 32:case"end":return e.stop()}},e,this,[[14,29]])}));return function(){return e.apply(this,arguments)}}(),addPlan:function(){var e=this;e.outerVisible1=!0,e.planTitle="新建推广计划",e.planDisabled=!1,e.op="add",e.planForm={plateform:"安卓",planname:"",planid:""}},sureAddPlan:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,a,n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=this,e.t0=t.channelForm.plateform,e.next="IOS"===e.t0?4:"安卓"===e.t0?6:"其他"===e.t0?8:10;break;case 4:return a=0,e.abrupt("break",11);case 6:return a=1,e.abrupt("break",11);case 8:return a=2,e.abrupt("break",11);case 10:a=2;case 11:if(t.$com.isEn(t.planForm.planid)){e.next=14;break}return t.$message.error("请输入纯英文的ID"),e.abrupt("return");case 14:return e.prev=14,n={type:0,name:t.planForm.planname,plateform:a,id:t.planForm.planid},e.next=18,t.$axios.$post("".concat(api.promotion.plan_add),n);case 18:if(r=e.sent,0!==r.code){e.next=26;break}return t.$message.success("新建成功！"),e.next=23,t.getList();case 23:t.outerVisible1=!1,e.next=27;break;case 26:t.$message.error(r.result);case 27:e.next=32;break;case 29:e.prev=29,e.t1=e["catch"](14),t.$message.error(e.t1);case 32:case"end":return e.stop()}},e,this,[[14,29]])}));return function(){return e.apply(this,arguments)}}(),sureUpdated:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,a,n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this,e.prev=1,1!==t.updaterow.type){e.next=16;break}e.t0=t.channelForm.plateform,e.next="IOS"===e.t0?6:"安卓"===e.t0?8:"其他"===e.t0?10:12;break;case 6:return a=0,e.abrupt("break",13);case 8:return a=1,e.abrupt("break",13);case 10:return a=2,e.abrupt("break",13);case 12:a=2;case 13:n={id:t.updaterow.id,name:t.channelForm.channelname,plateform:a,type:1},e.next=27;break;case 16:e.t1=t.planForm.plateform,e.next="IOS"===e.t1?19:"安卓"===e.t1?21:"其他"===e.t1?23:25;break;case 19:return a=0,e.abrupt("break",26);case 21:return a=1,e.abrupt("break",26);case 23:return a=2,e.abrupt("break",26);case 25:a=2;case 26:n={id:t.updaterow.id,name:t.planForm.planname,plateform:a,type:0};case 27:return e.next=29,t.$axios.$post("".concat(api.promotion.plan_update),n);case 29:if(r=e.sent,0!==r.code){e.next=38;break}return t.$message.success("更新成功！"),e.next=34,t.getList();case 34:t.outerVisible1=!1,t.outerVisible=!1,e.next=39;break;case 38:t.$message.error(r.result);case 39:e.next=44;break;case 41:e.prev=41,e.t2=e["catch"](1),t.$message.error(e.t2);case 44:case"end":return e.stop()}},e,this,[[1,41]])}));return function(){return e.apply(this,arguments)}}(),updateRow:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t,a){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=this,n.op=a,n.updaterow=t,e.t0=t.plateform,e.next=0===e.t0?6:1===e.t0?8:2===e.t0?10:12;break;case 6:return r="IOS",e.abrupt("break",13);case 8:return r="安卓",e.abrupt("break",13);case 10:return r="其他",e.abrupt("break",13);case 12:r="其他";case 13:1===t.type?(n.outerVisible=!0,n.channelTitle="修改渠道",n.channelDisabled=!1,n.channelForm={plateform:r,channelname:t.name,channelid:t.channelid}):(n.outerVisible1=!0,n.planTitle="修改推广计划",n.planDisabled=!1,n.planForm={plateform:r,planname:t.name,planid:t.id});case 14:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),lookRow:function(e,t){var a,n=this;switch(n.op=t,e.plateform){case 0:a="IOS";break;case 1:a="安卓";break;case 2:a="其他";break;default:a="其他"}1===e.type?(n.outerVisible=!0,n.channelTitle="查看渠道",n.channelDisabled=!0,n.channelForm={plateform:a,channelname:e.name,channelid:e.channelid}):(n.outerVisible1=!0,n.planTitle="查看推广计划",n.planDisabled=!0,n.planForm={plateform:a,planname:e.name,planid:e.id})},sureDel:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=this,e.prev=1,e.next=4,a.$axios.$post("".concat(api.promotion.plan_delete,"?id=").concat(t.id));case 4:if(n=e.sent,0!==n.code){e.next=9;break}return e.next=8,a.getList();case 8:a.$message.success("操作成功！");case 9:e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),console.log(e.t0);case 14:case"end":return e.stop()}},e,this,[[1,11]])}));return function(t){return e.apply(this,arguments)}}(),deleteRow:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var a,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a=this,a.$confirm("此操作将删除‘".concat(t.name,"’, 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.sureDel(t);case 2:case"end":return e.stop()}},e,this)}))).catch(function(){n.$message({type:"info",message:"已取消操作"})});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),handleCurrentChange:function(e){this.pagenum=e,this.getList()},handleSelect:function(e){var t=this;t.plates="渠道"===e?["IOS","安卓"]:["IOS","安卓","其他"],t.getList()},handleSelectPlates:function(e){this.getList()},handleSelectByTime:function(e){this.getList()}},beforeMount:function(){var e=this,t=this;t.res.data.map(function(a){return a.createTime=e.$com.createTime(a.createTime,"yy-mm-dd hh:MM"),t.res.data})},mounted:function(){}},o=i,u=(a("cc89"),a("2877")),l=Object(u["a"])(o,n,r,!1,null,"1ae99256",null);l.options.__file="index.vue";t["default"]=l.exports},"74f9":function(e,t,a){},cc89:function(e,t,a){"use strict";var n=a("74f9"),r=a.n(n);r.a}}]);
//# sourceMappingURL=chunk-0475.79598486.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d07"],{3704:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{directives:[{name:"loading",rawName:"v-loading.body",value:e.loadingAvatarUpload,expression:"loadingAvatarUpload",modifiers:{body:!0}}],staticClass:"flex flex-v",attrs:{id:"permission"}},[a("section",{staticClass:"permission_title"},[e._v("成都土著活动")]),a("section",{staticClass:"permission_table",staticStyle:{"padding-bottom":"80px"}},[a("section",{staticClass:"permission_table_top flex flex-pack-justify flex-align-center"},[a("section",{staticClass:"flex flex-1"},[a("el-radio-group",{on:{change:e.handleSelect},model:{value:e.radioRecord,callback:function(t){e.radioRecord=t},expression:"radioRecord"}},[a("el-radio",{attrs:{label:"topic"}},[e._v("上传题目配置")]),a("el-radio",{attrs:{label:"project"}},[e._v("项目配置")])],1)],1),a("section",{staticClass:"flex flex-align-center"},[a("el-upload",{staticClass:"upload-demo flex flex-align-center flex-pack-center",attrs:{headers:e.headers,action:e.uploadUrl,"on-error":e.handleError,"on-success":e.handleFileSuccess,"before-upload":e.beforeFileUpload,"file-list":e.fileList}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传配置")])],1)],1)]),"topic"===e.radioRecord?a("section",{staticClass:"permission_table_content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.questionList.data}},[a("el-table-column",{attrs:{prop:"index",label:"序号",width:"80"}}),a("el-table-column",{attrs:{label:"题目信息"}},[a("el-table-column",{attrs:{prop:"topic",label:"题目",width:"120"}}),a("el-table-column",{attrs:{prop:"diffcult",label:"难度",width:"120"}}),a("el-table-column",{attrs:{label:"答案列表"}},[a("el-table-column",{attrs:{prop:"answerA",label:"答案A"}}),a("el-table-column",{attrs:{prop:"answerB",label:"答案B"}}),a("el-table-column",{attrs:{prop:"answerC",label:"答案C"}}),a("el-table-column",{attrs:{prop:"answerD",label:"答案D"}})],1)],1)],1)],1):a("section",{staticClass:"permission_table_content intro"},[e._m(0)])]),a("section",{staticClass:"fixedBottom flex flex-align-center flex-pack-center"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.uploadAnswer}},[e._v("保 存")]),a("el-button",{attrs:{size:"small"},on:{click:e.back}},[e._v("返 回")])],1)])},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"list flex flex-v"},[a("p",[a("span",{staticClass:"score"},[e._v("100分：")]),a("span",[e._v("王者级成都土著")])]),a("p",[a("span",{staticClass:"score"},[e._v("60-99分：")]),a("span",[e._v("黄金级成都土著")])]),a("p",[a("span",{staticClass:"score"},[e._v("0-59分：")]),a("span",[e._v("砖头级成都土著")])]),a("p",[a("span",{staticClass:"score"},[e._v("每次从简单题集抽取数量：")]),a("span",[e._v("6")])]),a("p",[a("span",{staticClass:"score"},[e._v("每次从困难题集抽取数量：")]),a("span",[e._v("2")])]),a("p",[a("span",{staticClass:"score"},[e._v("每次答题扣减次数：")]),a("span",[e._v("1")])]),a("p",[a("span",{staticClass:"score"},[e._v("王者称号奖励金额：")]),a("span",[e._v("5元")])]),a("p",[a("span",{staticClass:"score"},[e._v("黄金称号奖励金额：")]),a("span",[e._v("2元")])]),a("p",[a("span",{staticClass:"score"},[e._v("金额获取上限：")]),a("span",[e._v("200元")])])])}],n=(a("96cf"),a("3040")),i=a("c93e"),o=a("2f62"),l={computed:Object(i["a"])({headers:function(){return!!this.$store.state.token&&{Authorization:"CloserSysAuth ".concat(this.$store.state.token)}},authUser:function(){return!!this.$store.state.authUser&&JSON.parse(this.$store.state.authUser)}},Object(o["c"])("activity_tuzhu",{questionList:function(e){return e.questionList}})),data:function(){return{uploadUrl:"".concat(api.filePath).concat(api.file),radioRecord:"topic",row:{},pagenum:1,pagesize:10,fileList:[],fileOnlineUrl:"",loadingAvatarUpload:!1}},created:function(){var e={activityId:this.$route.query.id};this.getQuestionList(e)},methods:Object(i["a"])({},Object(o["b"])("activity_tuzhu",["getQuestionList","localQuestionList","uploadQuestions"]),{handleSelect:function(e){this.radioRecord=e},handleError:function(e){this.$message.error("Network Error!")},back:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this,!t.isChange){e.next=5;break}t.$confirm("已上传了配置文档尚未保存，确认返回？","提示",{confirmButtonText:"保存",cancelButtonText:"返回",type:"warning"}).then(Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.uploadAnswer();case 2:case"end":return e.stop()}},e,this)}))).catch(function(){t.goback()}),e.next=7;break;case 5:return t.goback(),e.abrupt("return");case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),uploadAnswer:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this,t.loadingAvatarUpload=!0,t.fileOnlineUrl){e.next=6;break}return t.$message.warning("请先上传配置！"),t.loadingAvatarUpload=!1,e.abrupt("return");case 6:return e.next=8,t.uploadQuestions({questionFileUrl:t.fileOnlineUrl,activityId:t.$route.query.id});case 8:t.loadingAvatarUpload=!1;case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),handleFileSuccess:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,a,r){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(s=this,e.prev=1,0!==t.code){e.next=11;break}return s.fileList=r.slice(-1),s.fileOnlineUrl=t.result.url,e.next=7,s.localQuestionList({raw:a.raw});case 7:s.loadingAvatarUpload=!1,s.radioRecord="topic",e.next=12;break;case 11:s.$message.error(t.result);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](1),s.$message.error(e.t0);case 17:case"end":return e.stop()}},e,this,[[1,14]])}));return function(t,a,r){return e.apply(this,arguments)}}(),beforeFileUpload:function(e){var t=this,a="text/csv"===e.type;t.loadingAvatarUpload=!0;var r=e.size/1024/1024<1;return a||(t.$message.error("上传文件只能是 csv 文件!"),t.loadingAvatarUpload=!1),r||(t.$message.error("上传文件大小不能超过 1M!"),t.loadingAvatarUpload=!1),a&&r}})},c=l,u=(a("6031"),a("2877")),p=Object(u["a"])(c,r,s,!1,null,"b4137298",null);p.options.__file="config.vue";t["default"]=p.exports},6031:function(e,t,a){"use strict";var r=a("9db0"),s=a.n(r);s.a},"9db0":function(e,t,a){}}]);
//# sourceMappingURL=chunk-5d07.21982ef6.js.map
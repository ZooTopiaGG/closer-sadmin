(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a571"],{"37d5":function(e,t,n){},"739e":function(e,t,n){"use strict";var r=n("f63c"),i=n.n(r);i.a},bc5a:function(e,t,n){"use strict";var r=n("37d5"),i=n.n(r);i.a},ce70:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"flex flex-v",attrs:{id:"permission"}},[n("section",{staticClass:"permission_title"},[e._v("封面文章")]),n("section",{staticClass:"permission_table flex-1"},[n("section",{staticClass:"permission_table_top flex"},[n("section",{staticClass:"flex flex-align-center"},[n("el-select",{staticClass:"list-filter-select",attrs:{placeholder:"所属区域"},on:{change:e.handleSelectRegion},model:{value:e.fliterregion,callback:function(t){e.fliterregion=t},expression:"fliterregion"}},e._l(e.searchregion,function(e){return n("el-option",{key:e.region_name,attrs:{label:e.region_name,value:e.region_id}})}))],1),n("section",{staticClass:"flex flex-align-center",staticStyle:{"margin-left":"30px","margin-right":"10px"}},[n("el-input",{attrs:{placeholder:"请输入栏目名称"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchCover(t):null}},model:{value:e.cover_value,callback:function(t){e.cover_value=t},expression:"cover_value"}})],1),n("section",{staticClass:"flex flex-align-center",staticStyle:{"margin-left":"30px","margin-right":"10px"}},[n("el-input",{attrs:{placeholder:"请输入标题（关键词语，常用词语）"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchCover(t):null}},model:{value:e.title_value,callback:function(t){e.title_value=t},expression:"title_value"}})],1),n("section",{staticClass:"flex flex-align-center",staticStyle:{"margin-left":"30px","margin-right":"10px"}},[n("el-button",{attrs:{icon:"el-icon-search"},on:{click:e.searchCover}},[e._v("立即搜索")])],1),n("section",{staticClass:"flex flex-align-center"},[n("el-button",{attrs:{type:"text"},on:{click:e.clearSearch}},[e._v("清除搜索")])],1)]),n("section",{staticClass:"permission_table_content"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.coverList.data,id:"cover"}},[n("el-table-column",{attrs:{fixed:"",label:"缩略图",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("section",[n("img",{staticClass:"table_logo",attrs:{src:e.$com.makeFileUrl(t.row.cover),alt:""}})])]}}])}),n("el-table-column",{attrs:{prop:"title",label:"标题"}}),n("el-table-column",{attrs:{prop:"long_publish_time",label:"发布时间"}}),n("el-table-column",{attrs:{prop:"communityName",label:"来源"}}),n("el-table-column",{attrs:{prop:"username",label:"投稿人"}}),n("el-table-column",{attrs:{prop:"userid",label:"投稿人ID"}}),n("el-table-column",{attrs:{label:"封面贴"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.is_bigCover_card?n("span",{staticStyle:{color:"#85c976"}},[e._v("是")]):n("span",[e._v("否")])]}}])}),n("el-table-column",{attrs:{prop:"out",label:"站外阅读"}}),n("el-table-column",{attrs:{prop:"in",label:"站内阅读"}}),n("el-table-column",{attrs:{label:"上封面"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.is_bigCover_card?n("el-button",{attrs:{type:"info",disabled:"disabled",size:"medium"}},[e._v("上封面")]):n("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(n){e.sureGotoCover(t.row)}}},[e._v("上封面")])]}}])}),n("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(n){e.preview(t.row)}}},[e._v("预览")])]}}])})],1)],1)]),n("section",{staticClass:"block cloumn-block"},[n("el-pagination",{attrs:{"current-page":e.coverpara.pagenum,"page-size":e.coverpara.pagesize,layout:"total, prev, pager, next, jumper",total:e.coverList.count},on:{"current-change":e.handleCurrentChange}})],1),n("el-dialog",{staticClass:"preview",attrs:{title:"手机预览",visible:e.dialogVisible,width:"375px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("iframe",{attrs:{src:e.pre_src,frameborder:"0",width:"375px",height:"667px"}})])],1)},i=[],a=(n("96cf"),n("3040")),o=n("c93e"),c=(n("cadf"),n("551c"),n("097d"),n("2f62")),s={computed:Object(o["a"])({},Object(c["c"])("content",{coverList:function(e){return e.coverList},searchregion:function(e){return e.regionsList},defaultRegion:function(e){return e.defaultRegion}})),data:function(){return{pre_src:"",dialogVisible:!1,res:{data:[],count:0},cover_value:"",title_value:"",fliterregion:"",pagenum:1,pagesize:10,coverpara:{communityName:"",region_id:"",pagesize:10,pagenum:1},cityregions:{keywords:"",pagenum:1,pagesize:100}}},created:function(){},methods:Object(o["a"])({},Object(c["b"])("content",["adminSearch","coverSetting","getRegionsList"]),{preview:function(e){var t,n=window.location.host;/sandbox.tiejin/.test(n)?t="https://h5-sandbox.tiejin.cn":/tiejin/.test(n)&&(t="https://h5.tiejin.cn"),this.pre_src="".concat(t,"/feed/").concat(e.subjectid,"?view=pre"),this.dialogVisible=!0},getCoverList:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this,e.next=3,t.adminSearch(t.coverpara);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),handleCurrentChange:function(e){this.coverpara["pagenum"]=e,this.getCoverList()},handleSelectRegion:function(e){this.coverpara["pagenum"]=1,this.coverpara["region_id"]=this.fliterregion,this.getCoverList()},searchCover:function(){var e=this;e.coverpara={communityName:e.cover_value,title:e.title_value,region_id:e.fliterregion,pagesize:10,pagenum:1},e.getCoverList()},clearSearch:function(){var e=this;e.cover_value="",e.title_value="",e.coverpara["pagenum"]=1,e.coverpara["communityName"]="",e.coverpara["title"]="",e.getCoverList()},sureGotoCover:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=this,n.$confirm("此操作将设置该贴子为封面贴，是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(a["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.gotoCover(t);case 2:case"end":return e.stop()}},e,this)}))).catch(function(){r.$message({type:"info",message:"已取消操作"})});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),gotoCover:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t.subjectid){e.next=3;break}return n.$message.warning("上封面的贴子id， 不存在！"),e.abrupt("return");case 3:return n=this,e.next=6,n.coverSetting({subjectid:t.subjectid,region_id:n.fliterregion||"0"});case 6:if(r=e.sent,!r){e.next=10;break}return e.next=10,n.getCoverList();case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}),mounted:function(){var e=this;e.$nextTick(Object(a["a"])(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getRegionsList(e.cityregions);case 2:n=t.sent,n?(e.fliterregion=n,e.coverpara={communityName:"",region_id:e.fliterregion,pagesize:10,pagenum:1},e.adminSearch(e.coverpara)):e.$message.error("分配城市异常！");case 4:case"end":return t.stop()}},t,this)})))}},l=s,u=(n("bc5a"),n("739e"),n("2877")),p=Object(u["a"])(l,r,i,!1,null,"5dbab99e",null);p.options.__file="cover.vue";t["default"]=p.exports},f63c:function(e,t,n){}}]);
//# sourceMappingURL=chunk-a571.27c09abb.js.map
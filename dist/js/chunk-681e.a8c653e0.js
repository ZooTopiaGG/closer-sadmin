(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-681e"],{1150:function(e,t,r){},"49e6":function(e,t,r){"use strict";var n=r("55cc"),i=r.n(n);i.a},"55cc":function(e,t,r){},bf9d:function(e,t,r){"use strict";var n=r("1150"),i=r.n(n);i.a},c261:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"flex flex-v",attrs:{id:"permission"}},[r("section",{staticClass:"permission_title"},[e._v("推送管理")]),r("section",{staticClass:"permission_table flex-1"},[r("section",{staticClass:"permission_table_top flex flex-pack-justify"},[r("section",{staticClass:"flex flex-align-center"},[r("el-select",{staticClass:"list-filter-select",attrs:{placeholder:"所属区域"},on:{change:e.handleSelectRegion},model:{value:e.fliterregion,callback:function(t){e.fliterregion=t},expression:"fliterregion"}},e._l(e.regionList,function(e){return r("el-option",{key:e.region_name,attrs:{label:e.region_name,value:e.region_id}})}))],1),r("section",{staticClass:"flex flex-align-center"},[r("section",[r("span",[e._v("今日剩余推送次数："),r("span",{ref:"remaining",staticStyle:{color:"red","font-size":"18px"}},[e._v(e._s(e.pushList.remainingCount||5))])])]),r("section",{staticClass:"flex flex-align-center",staticStyle:{"margin-left":"30px"}},[r("el-button",{attrs:{type:"primary",disabled:e.pushList.remainingCount<=0},on:{click:e.createPush}},[e._v("建立推送")])],1)])]),r("section",{staticClass:"permission_table_content"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.pushList.data}},[r("el-table-column",{attrs:{type:"index",label:"序号"}}),r("el-table-column",{attrs:{prop:"subjectUrl",label:"推送帖子链接"}}),r("el-table-column",{attrs:{prop:"subjectName",label:"推送贴子名称"}}),r("el-table-column",{attrs:{prop:"createTime",label:"推送时间"}}),r("el-table-column",{attrs:{prop:"status",label:"推送状态"}}),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.subjectUrl&&"-"!=t.row.subjectUrl?r("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(r){e.preview(t.row)}}},[e._v("查看贴子")]):e._e(),"定时推送"===t.row.status?r("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(r){e.preview(t.row.subjectId)}}},[e._v("删除")]):e._e()]}}])})],1)],1)]),r("el-dialog",{attrs:{title:"建立推送",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-form",{attrs:{model:e.form}},[r("el-form-item",[r("section",{staticClass:"flex flex-align-center"},[r("span",[e._v("当前推送城市："),r("span",{staticStyle:{color:"red"}},[e._v(e._s(e.flitername))])])])]),r("el-form-item",{attrs:{label:"贴子链接","label-width":e.formLabelWidth}},[r("el-input",{attrs:{type:"url"},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1),r("el-form-item",{attrs:{label:"推送方式","label-width":e.formLabelWidth}},[r("el-radio",{attrs:{label:1},model:{value:e.pushWay,callback:function(t){e.pushWay=t},expression:"pushWay"}},[e._v("立即推送")])],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.preview2(e.subjectid)}}},[e._v("查看贴子")]),r("el-button",{attrs:{type:"primary"},on:{click:e.sureCreatePush}},[e._v("确 定")])],1)],1),e.pushList.count>0?r("section",{staticClass:"block cloumn-block"},[r("el-pagination",{attrs:{"current-page":e.pagenum,"page-size":e.pagesize,layout:"total, prev, pager, next, jumper",total:e.pushList.count},on:{"current-change":e.handleCurrentChange}})],1):e._e(),r("el-dialog",{staticClass:"preview",attrs:{title:"手机预览",visible:e.dialogVisible,width:"375px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("iframe",{attrs:{src:e.pre_src,frameborder:"0",width:"375px",height:"667px"}})])],1)},i=[],a=(r("96cf"),r("3040")),s=r("c93e"),l=(r("cadf"),r("551c"),r("097d"),r("2f62")),u={computed:Object(s["a"])({authUser:function(){return this.$store.state.authUser}},Object(l["c"])("push",["regionList","pushList"])),data:function(){return{pushpara:{pagenum:1,pagesize:10,regionid:"0"},user_phone:"",dialogFormVisible:!1,dialogVisible:!1,formLabelWidth:"80px",form:{url:""},pushWay:1,pagenum:1,pagesize:10,fliterregion:"",flitername:"",searchregion:[],subjectid:"",pre_src:""}},created:function(){var e=this,t=1===e.authUser.type?"0":JSON.parse(e.authUser.pushCity)[0];e.pushpara["regionid"]=t,e.subjectPushList(e.pushpara),e.allRegions(),e.fliterregion=t},methods:Object(s["a"])({},Object(l["b"])("push",["subjectPushList","subjectPushAdd","allRegions"]),{createPush:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this,t.form["url"]="",e.next=4,t.regionList.map(function(e){e.region_id===t.fliterregion&&(t.flitername=e.region_name)});case 4:t.dialogFormVisible=!0;case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),sureCreatePush:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this,t.fliterregion){e.next=4;break}return t.$message.warning("城市必选"),e.abrupt("return");case 4:if(t.pushWay){e.next=7;break}return t.$message.warning("推送方式必选"),e.abrupt("return");case 7:if(t.form["url"]){e.next=10;break}return t.$message.warning("推送链接必填"),e.abrupt("return");case 10:if(!(t.$refs.remaining.innerHTML<=0)){e.next=13;break}return t.$message.warning("今天的推送次数用完了！"),e.abrupt("return");case 13:return e.next=15,t.subjectPushAdd({pushtype:t.pushWay,subjecturl:t.form["url"],regionname:t.flitername||"",regionid:t.fliterregion||""});case 15:r=e.sent,t.dialogFormVisible=!r,r&&(t.$refs.remaining.innerHTML=t.$refs.remaining.innerHTML-1,setTimeout(Object(a["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.pagenum=1,e.next=3,t.handleSelect();case 3:case"end":return e.stop()}},e,this)})),2e3));case 18:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),handleSelectRegion:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=this,r.fliterregion=t,e.next=4,r.regionList.map(function(e){e.region_id===t&&(r.flitername=e.region_name)});case 4:return e.next=6,r.handleSelect();case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),preview:function(e,t){this.pre_src=t||e.subjectUrl,this.dialogVisible=!0},preview2:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this,t.form["url"]){e.next=4;break}return t.$message.warning("推送链接必填"),e.abrupt("return");case 4:return e.next=6,t.preview(null,t.form["url"]);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),handleCurrentChange:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.pagenum=t,e.next=3,this.handleSelect();case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),handleSelect:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this,t.pushpara["regionid"]=t.fliterregion||"",t.pushpara["pagenum"]=t.pagenum||1,e.next=5,t.subjectPushList(t.pushpara);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()})},o=u,c=(r("bf9d"),r("49e6"),r("2877")),p=Object(c["a"])(o,n,i,!1,null,"ef691acc",null);p.options.__file="index.vue";t["default"]=p.exports}}]);
//# sourceMappingURL=chunk-681e.a8c653e0.js.map